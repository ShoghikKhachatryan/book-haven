<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="en">-->
<!--<head>-->
<!--    <title>Buy cool new product</title>-->
<!--    <link rel="stylesheet" href="style.css">-->
<!--&lt;!&ndash;    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">&ndash;&gt;-->
<!--    <script src="https://js.stripe.com/v3/"></script>-->
<!--</head>-->
<!--<body>-->
<!--<section>-->
<!--    <table class="table table-striped table-hover">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>Product</th>-->
<!--            <th>Price</th>-->
<!--            <th>Quantity</th>-->
<!--            <th>Sub Total</th>-->
<!--        </tr>-->
<!--        </thead>-->

<!--        <tbody>-->
<!--        <div class="product" th:each="lineItem : ${lineItems}" th:method="post">-->
<!--            <tr>-->
<!--                <td th:text="${lineItem.book.title}">erer</td>-->
<!--                <td th:text="${#numbers.formatDecimal(lineItem.book.price, 1, 'COMMA',2,'POINT')}">erere</td>-->
<!--                <td th:text="${lineItem.quantity}">erere</td>-->
<!--                <td th:text="${lineItem.lineTotal}">erere</td>-->
<!--            </tr>-->
<!--        </div>-->
<!--        </tbody>-->
<!--    </table>-->
<!--    -->

<!--    <form action="/create-checkout-session" method="POST">-->
<!--        <button type="submit" id="checkout-button">Checkout</button>-->
<!--    </form>-->
<!--</section>-->
<!--</body>-->
<!--</html>-->

<script src="https://js.stripe.com/v3/"></script>

<button id="checkout-button">Checkout</button>

<script type="text/javascript">
    var stripe = Stripe('sk_test_51PniUQL6UNiuiJrz3evmG6jsYeX2t6cX9jamtzA2abCihZuCBqO73uSNeeuzaWyuPfWVnTZSmWgIsksDcAWprwuH00XcXZqkZ0');

    document.getElementById('checkout-button').addEventListener('click', function () {
        fetch('/api/checkout/create-checkout-session', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                // Include any necessary data for the session creation
            })
        })
            .then(function(response) {
                return response.json();
            })
            .then(function(sessionId) {
                return stripe.redirectToCheckout({ sessionId: sessionId.id });
            })
            .then(function(result) {
                if (result.error) {
                    alert(result.error.message);
                }
            })
            .catch(function(error) {
                console.error('Error:', error);
            });
    });
</script>
